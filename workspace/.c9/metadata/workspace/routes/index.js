{"filter":false,"title":"index.js","tooltip":"/routes/index.js","undoManager":{"mark":2,"position":2,"stack":[[{"start":{"row":0,"column":0},"end":{"row":56,"column":1},"action":"insert","lines":["app.get(\"/\", function(req, res){","    res.render(\"landing\");","});","","//INDEX - show all campgrounds","","","// ====================","// COMMENTS ROUTES","// ====================","","","","//Auth Routes","","//show register form","app.get(\"/register\", function(req, res){","    res.render(\"register\");","});","//handle sign up logic","app.post(\"/register\", function(req, res){","    var newUser = new User({username: req.body.username});","    User.register(newUser, req.body.password, function(err, user){","        if(err){","            console.log(err)","            return res.render(\"register\")","        }","        passport.authenticate(\"local\")(req, res, function(){","            res.redirect(\"/campgrounds\");","        })","            ","    ","    })","});","// show login form","app.get(\"/login\", function(req, res){","   res.render(\"login\"); ","});","//handling login logic","app.post(\"/login\", passport.authenticate(\"local\", ","    {","        successRedirect: \"/campgrounds\",","        failureRedirect: \"/login\"","    }), function(req, res){","});","// logic route","app.get(\"/logout\", function(req, res){","   req.logout();","   res.redirect(\"/campgrounds\");","});","","function isLoggedIn(req, res, next){","    if(req.isAuthenticated()){","        return next();","    }","    res.redirect(\"/login\");","}"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":56,"column":1},"action":"remove","lines":["app.get(\"/\", function(req, res){","    res.render(\"landing\");","});","","//INDEX - show all campgrounds","","","// ====================","// COMMENTS ROUTES","// ====================","","","","//Auth Routes","","//show register form","app.get(\"/register\", function(req, res){","    res.render(\"register\");","});","//handle sign up logic","app.post(\"/register\", function(req, res){","    var newUser = new User({username: req.body.username});","    User.register(newUser, req.body.password, function(err, user){","        if(err){","            console.log(err)","            return res.render(\"register\")","        }","        passport.authenticate(\"local\")(req, res, function(){","            res.redirect(\"/campgrounds\");","        })","            ","    ","    })","});","// show login form","app.get(\"/login\", function(req, res){","   res.render(\"login\"); ","});","//handling login logic","app.post(\"/login\", passport.authenticate(\"local\", ","    {","        successRedirect: \"/campgrounds\",","        failureRedirect: \"/login\"","    }), function(req, res){","});","// logic route","app.get(\"/logout\", function(req, res){","   req.logout();","   res.redirect(\"/campgrounds\");","});","","function isLoggedIn(req, res, next){","    if(req.isAuthenticated()){","        return next();","    }","    res.redirect(\"/login\");","}"],"id":2},{"start":{"row":0,"column":0},"end":{"row":56,"column":24},"action":"insert","lines":["var express = require(\"express\");","var router  = express.Router();","var passport = require(\"passport\");","var User = require(\"../models/user\");","","//root route","router.get(\"/\", function(req, res){","    res.render(\"landing\");","});","","// show register form","router.get(\"/register\", function(req, res){","   res.render(\"register\"); ","});","","//handle sign up logic","router.post(\"/register\", function(req, res){","    var newUser = new User({username: req.body.username});","    User.register(newUser, req.body.password, function(err, user){","        if(err){","            console.log(err);","            return res.render(\"register\");","        }","        passport.authenticate(\"local\")(req, res, function(){","           res.redirect(\"/campgrounds\"); ","        });","    });","});","","//show login form","router.get(\"/login\", function(req, res){","   res.render(\"login\"); ","});","","//handling login logic","router.post(\"/login\", passport.authenticate(\"local\", ","    {","        successRedirect: \"/campgrounds\",","        failureRedirect: \"/login\"","    }), function(req, res){","});","","// logout route","router.get(\"/logout\", function(req, res){","   req.logout();","   res.redirect(\"/campgrounds\");","});","","//middleware","function isLoggedIn(req, res, next){","    if(req.isAuthenticated()){","        return next();","    }","    res.redirect(\"/login\");","}","","module.exports = router;"]}],[{"start":{"row":56,"column":24},"end":{"row":57,"column":0},"action":"insert","lines":["",""],"id":3}]]},"ace":{"folds":[],"scrolltop":917,"scrollleft":0,"selection":{"start":{"row":57,"column":0},"end":{"row":57,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":29,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1557417561050,"hash":"ea812e11bc1a06d43244797d07cfce86390862f6"}